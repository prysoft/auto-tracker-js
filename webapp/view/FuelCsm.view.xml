<mvc:View controllerName="com.prysoft.autotracker.controller.FuelCsm"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns="sap.m">

    <SplitContainer mode="StretchCompressMode">
        <masterPages>
            <Page title="{i18n>tAuto}" class="sapUiStdPage">
                <subHeader>
                    <Toolbar>
                        <SearchField liveChange="onSearch" width="100%" />
                    </Toolbar>
                </subHeader>
                <content>
                    <List id="unitList" items="{path: '/units', sorter: {path: 'name'}}" itemPress="selectAuto">
                        <items>
                            <StandardListItem type="Active"
                                              title="{name}"
                                              description="{address}"
                                              icon="{icon}"
                                              iconDensityAware="false"
                                              iconInset="false"
                                              class="unit-std-listitem"/>
                        </items>
                    </List>
                </content>
            </Page>
        </masterPages>
        <detailPages>
            <Page id="fuelChargePage" title="Отчет. [Выберите объект из списка]" class="sapUiStdPage">
                <subHeader>
                    <Toolbar>
                        <DateRangeSelection id="drsPeriod" displayFormat="dd.MM.yyyy" enabled="false" disabled="disabled" change="drsPeriodChange" width="20rem"/>
                        <!--<MaskInput mask = "Dd.Mm.Yyyy - Dd.Mm.Yyyy" placeholderSymbol = "_" placeholder = "Enter Date" >-->
                            <!--<rules>-->
                                <!--<MaskInputRule maskFormatSymbol = "D" regex = "[0-3]"/>-->
                                <!--<MaskInputRule maskFormatSymbol = "d" regex = "[0-9]"/>-->
                                <!--<MaskInputRule maskFormatSymbol = "M" regex = "[0-1]"/>-->
                                <!--<MaskInputRule maskFormatSymbol = "m" regex = "[0-9]"/>-->
                                <!--<MaskInputRule maskFormatSymbol = "Y" regex = "[1-2]"/>-->
                                <!--<MaskInputRule maskFormatSymbol = "y" regex = "[0-9]"/>-->
                            <!--</rules>-->
                        <!--</MaskInput>-->
                        <!--<MaskInput mask = "99.99.9999 - 99.99.9999" placeholderSymbol = "_" placeholder = "Enter Date" />-->
                    </Toolbar>
                </subHeader>
                <content>
                    <IconTabBar id="reportTabBar"
                            stretchContentHeight="true"
                            backgroundDesign="Transparent"
                            applyContentPadding="false"
                            expanded="{device>/isNoPhone}"
                            class="sapUiResponsiveContentPadding">
                        <items>
                            <IconTabFilter text="Отпуск топлива">
                                <ScrollContainer height="100%" width="100%" horizontal="false" vertical="true">
                                    <Table id="tblFuelMessages"
                                           items="{path: '/requestedMessages', sorter:[{path:'dt', descending:true, group:'.getMsgGroup'}, {path:'t'}], groupHeaderFactory: '.getMsgGroupHeader'}">
                                        <!-- mergeDuplicates="true" group:true ,{path:'t', descending:false} -->
                                        <columns>
                                            <Column width="4em" minScreenWidth="Tablet" demandPopin="true">
                                                <Text text="Время" />
                                            </Column>
                                            <Column>
                                                <Text text="Получатель" />
                                            </Column>
                                            <Column width="6em" minScreenWidth="Tablet" demandPopin="true" hAlign="Right">
                                                <Text text="Объем, л" />
                                            </Column>
                                            <Column width="6em" minScreenWidth="Tablet" demandPopin="true" hAlign="Right">
                                                <Text text="Без карты, л" />
                                            </Column>
                                        </columns>
                                        <items>
                                            <ColumnListItem>
                                                <cells>
                                                    <!--<ObjectIdentifier title="{vn}.{vt}" />-->
                                                    <Text text="{path: 't', type: 'sap.ui.model.type.Date', formatOptions: {pattern:'HH:mm'}}" />
                                                    <Text text="{parts:['p/refueling_card_id', '/fuelCardsMap'], formatter: '.formatRefuelingCardId'}" />
                                                    <Text text="{p/refueling_amount}" />
                                                    <Text text="---" />
                                                </cells>
                                            </ColumnListItem>
                                        </items>
                                    </Table>
                                </ScrollContainer>
                            </IconTabFilter>
                            <IconTabFilter text="Сливы">
                                <Text text="В процессе разработки ..." />
                            </IconTabFilter>
                        </items>
                    </IconTabBar>
                </content>
            </Page>
        </detailPages>
    </SplitContainer>
</mvc:View>
